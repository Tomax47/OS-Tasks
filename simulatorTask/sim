#!/bin/python3

import random
import sys

RED = '\033[91m'
GREEN = '\033[92m'
RESET = '\033[0m'

def main():
    step = 0
    hits = 0
    misses = 0
    last_numbers = []

    while True:
        step += 1
        random_number = random.randint(0, 9)
        last_numbers.append(random_number)
        if len(last_numbers) > 10:
            last_numbers.pop(0)

        while True:
            user_input = input(f"Step: {step}\nPlease enter number from 0 to 9 (q - quit): ").strip()

            if user_input == 'q':
                print("Exiting...")
                sys.exit(0)

            if user_input.isdigit() and 0 <= int(user_input) <= 9:
                user_number = int(user_input)
                break
            else:
                print("Input error!")

        if user_number == random_number:
            print(f"{GREEN}Hit! My number: {random_number}{RESET}")
            hits += 1
        else:
            print(f"{RED}Miss! My number: {random_number}{RESET}")
            misses += 1

        total = hits + misses
        hit_percent = (hits / total) * 100 if total > 0 else 0
        miss_percent = (misses / total) * 100 if total > 0 else 0

        print(f"Hit: {hit_percent:.0f}% Miss: {miss_percent:.0f}%")

        colored_numbers = []
        for num in last_numbers:
            if num == random_number and user_number == random_number:
                colored_numbers.append(f"{GREEN}{num}{RESET}")
            else:
                colored_numbers.append(f"{RED}{num}{RESET}")

        print(f"Numbers: {' '.join(colored_numbers)}\n")

if __name__ == "__main__":
    main()
